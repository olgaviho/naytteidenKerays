{% extends "layout.html" %}

{% block body %}

<p>
    Nature site: {{ naturesite.name }}
</p>
<p>
    Report: {{ report.title }}
</p>
<p>
    {{ report.description }}
</p>

<p>
    Comments
</p>


<table>
    <tr>
        <th>Author</th>
        <th>Text</th>
        <th>Edit</th>
        <th>Delete</th>
    </tr>
    {% for comment in report.comments %}
    <tr>
        <td>
            {{ comment.account.username }}
        </td>
        <td>
            {{ comment.text }}
        </td>
        <td>
            <form method="POST" action="{{ url_for('comment_change_description', report_id = report.id, naturesite_id = naturesite.id, comment_id = comment.id) }}">                   
            {{ form2.newtext }}
            <input type="submit" value="Change text" />
            </form>
        </td>
        <td>
                <ul>
                    {% for error in form2.newtext.errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </td>
        <td>
            <form method="POST" action="{{ url_for('delete_comment', report_id = report.id, naturesite_id = naturesite.id, comment_id = comment.id) }}">
                    <input type="submit" value="Delete" />
            </form>
        </td>
        {% endfor %}
</table>

<form method="POST" action="{{url_for('comment_create', report_id = report.id, naturesite_id=naturesite.id) }}">
        <table>
            <tr>
                <td>
                    {{ form.text.label }}
                </td>
                <td>
                    {{ form.text }}
                </td>
                <td>
                    <ul>
                        {% for error in form.text.errors %}
                        <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                </td>
            </tr>
            <tr>
                <td colspan="3">
                    <input type="submit" value="Add a new comment" />
                </td>
            </tr>
        </table>
    </form>


{% endblock %}